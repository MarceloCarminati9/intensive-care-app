<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evoluções do Paciente - Intensive Care Brasil</title>
    <link rel="stylesheet" href="patient-view-style.css"> 
    <link rel="icon" href="intensivecare.jpeg" type="image/jpeg">
</head>
<body>
    <div class="patient-view-container">
        <header class="patient-header">
            <div class="patient-info-header">
                <a href="#" id="backToPatientViewLink" class="back-link">&larr; Voltar para o Prontuário</a>
                <h1 id="patientNameHeader">Carregando...</h1>
                <p>Evoluções Médicas</p>
            </div>
        </header>

        <main>
            <section class="evolution-form-section">
                <h2 id="formTitle">Nova Evolução Médica</h2>
                <form id="evolutionForm">
                    
                    <fieldset>
                        <legend>1. Impressão das Últimas 24h</legend>
                        <div class="form-group full-width">
                            <textarea id="impressao24h" name="impressao24h" rows="3" placeholder="Resumo objetivo da evolução..."></textarea>
                        </div>
                    </fieldset>
    
                    <fieldset>
                        <legend>2. Exame Físico</legend>
                        <div class="sub-fieldset"><div class="legend-2">Neurológico</div>
                            <div class="form-group">
                                <label>Glasgow <span class="tooltip" data-tooltip="Use os menus para selecionar as respostas. O total é calculado automaticamente.">&#9432;</span></label>
                                <div class="glasgow-grid" id="glasgow_details">
                                    <select name="glasgow_ocular"><option value="0">Ocular</option><option value="4">4 - Abertura espontânea</option><option value="3">3 - Ao chamado</option><option value="2">2 - À dor</option><option value="1">1 - Nenhuma</option></select>
                                    <select name="glasgow_verbal"><option value="0">Verbal</option><option value="5">5 - Orientado</option><option value="4">4 - Confuso</option><option value="3">3 - Palavras</option><option value="2">2 - Sons</option><option value="1">1 - Nenhuma</option></select>
                                    <select name="glasgow_motor"><option value="0">Motor</option><option value="6">6 - Obedece comandos</option><option value="5">5 - Localiza dor</option><option value="4">4 - Retirada inespecífica</option><option value="3">3 - Flexão anormal</option><option value="2">2 - Extensão anormal</option><option value="1">1 - Nenhuma</option></select>
                                    <input type="text" name="glasgow_total" placeholder="Total" disabled style="font-weight: bold; text-align: center; background-color: #f0f0f0;">
                                </div>
                                <label class="checkbox-inline"><input type="checkbox" id="glasgow_na"> N/A</label>
                            </div>
                            <div class="form-group"><label>RASS <span class="tooltip" data-tooltip="+4 Combativo&#10;+3 Muito agitado&#10;+2 Agitado&#10;+1 Inquieto&#10;0 Alerta e calmo&#10;-1 Sonolento&#10;-2 Sedação leve&#10;-3 Sedação moderada&#10;-4 Sedação profunda&#10;-5 Não desperta">&#9432;</span></label><input type="text" id="rass" name="rass" style="width: 80px;"><label class="checkbox-inline"><input type="checkbox" id="rass_na"> N/A</label></div>
                            <div class="form-group"><label>CAM-ICU <span class="tooltip" data-tooltip="Confusion Assessment Method for the ICU (Avaliação de Delirium)">&#9432;</span></label><div class="radio-group"><label><input type="radio" name="camicu" value="Positivo"> Positivo</label><label><input type="radio" name="camicu" value="Negativo"> Negativo</label></div><label class="checkbox-inline"><input type="checkbox" id="camicu_na"> N/A</label></div>
                            <div class="form-group"><label>NIHSS <span class="tooltip" data-tooltip="National Institutes of Health Stroke Scale (Escala de AVC)">&#9432;</span></label><input type="number" id="nihss" name="nihss" style="width: 80px;"><label class="checkbox-inline"><input type="checkbox" id="nihss_na"> N/A</label></div>
                            <div class="form-group"><label>Pupilas</label>
                                <div>Tamanho: <div class="radio-group"><label><input type="radio" name="pupilas_tamanho" value="Isocóricas">Isocóricas</label><label><input type="radio" id="pupilas_anisocoricas" name="pupilas_tamanho" value="Anisocóricas">Anisocóricas</label><label><input type="radio" name="pupilas_tamanho" value="Mióticas">Mióticas</label><label><input type="radio" name="pupilas_tamanho" value="Midriáticas">Midriáticas</label></div></div>
                                <div class="inline-inputs hidden" id="anisocoria_details"><input type="text" placeholder="Esq (mm)" name="pupila_esq"><input type="text" placeholder="Dir (mm)" name="pupila_dir"></div>
                                <div style="margin-top: 10px;">Reatividade: <div class="radio-group"><label><input type="radio" name="pupilas_reatividade" value="Fotorreagentes">Fotorreagentes</label><label><input type="radio" name="pupilas_reatividade" value="Não Fotorreagentes">Não Fotorreagentes</label></div></div>
                            </div>
                        </div>
                    </fieldset>
    
                    <fieldset>
                        <legend>3. Suporte Ventilatório</legend>
                        <div class="grid-container">
                            <div class="form-group">
                                <label for="vm_modo">Modo Ventilatório</label>
                                <input type="text" id="vm_modo" name="vm_modo" placeholder="Ex: VCV, PCV, PSV, Espontânea...">
                            </div>
                            <div class="form-group">
                                <label for="vm_fio2">FiO2 (%)</label>
                                <input type="number" id="vm_fio2" name="vm_fio2" placeholder="Ex: 40">
                            </div>
                            <div class="form-group">
                                <label for="vm_peep">PEEP (cmH2O)</label>
                                <input type="number" id="vm_peep" name="vm_peep" placeholder="Ex: 8">
                            </div>
                            <div class="form-group">
                                <label for="relacao_po2_fio2">Relação PaO2/FiO2</label>
                                <input type="number" id="relacao_po2_fio2" name="relacao_po2_fio2" placeholder="Ex: 250">
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>4. Diurese e Balanço Hídrico</legend>
                        <div class="grid-container">
                            <div class="form-group">
                                <label for="diurese_24h">Diurese 24h (ml)</label>
                                <input type="number" id="diurese_24h" name="diurese_24h">
                            </div>
                            <div class="form-group">
                                <label for="balanco_hidrico_24h">Balanço Hídrico 24h (ml)</label>
                                <input type="number" id="balanco_hidrico_24h" name="balanco_hidrico_24h">
                            </div>
                             <div class="form-group">
                                <label for="balanco_hidrico_total">Balanço Hídrico Total (ml)</label>
                                <input type="number" id="balanco_hidrico_total" name="balanco_hidrico_total">
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>5. Suporte Hemodinâmico e Drogas Vasoativas</legend>
                        <div class="grid-container">
                            <div class="form-group">
                                <label for="pam_meta">PAM Meta (mmHg)</label>
                                <input type="text" id="pam_meta" name="pam_meta" placeholder="Ex: > 65 mmHg">
                            </div>
                            <div class="form-group">
                                <label for="diurese_meta">Diurese Meta (ml/kg/h)</label>
                                <input type="text" id="diurese_meta" name="diurese_meta" placeholder="Ex: > 0.5 ml/kg/h">
                            </div>
                            <div class="form-group">
                                <label for="pvc_meta">PVC Meta (mmHg)</label>
                                <input type="text" id="pvc_meta" name="pvc_meta" placeholder="Ex: 8-12 mmHg">
                            </div>
                             <div class="form-group">
                                <label for="satura_venosa_meta">Sat. Venosa Central Meta (%)</label>
                                <input type="text" id="satura_venosa_meta" name="satura_venosa_meta" placeholder="Ex: > 70%">
                            </div>
                        </div>
                        <div class="form-group full-width">
                            <label for="dva">Drogas Vasoativas (DVA) em uso</label>
                            <textarea id="dva" name="dva" rows="2" placeholder="Ex: Noradrenalina 0.5mcg/kg/min"></textarea>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>6. Metas Terapêuticas</legend>
                         <div class="form-group">
                            <label for="metas_terapeuticas">Descrição das Metas</label>
                            <textarea id="metas_terapeuticas" name="metas_terapeuticas" rows="2" placeholder="Descrever as metas para o dia. Ex: Desmame da VM, manter balanço hídrico negativo, etc."></textarea>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>7. Dieta e Função Intestinal</legend>
                        <div class="grid-container">
                             <div class="form-group">
                                <label for="dieta_tipo">Tipo de Dieta</label>
                                <input type="text" id="dieta_tipo" name="dieta_tipo" placeholder="Ex: Enteral, NPO, Oral livre">
                            </div>
                            <div class="form-group">
                                <label for="dieta_volume">Volume / Kcal</label>
                                <input type="text" id="dieta_volume" name="dieta_volume" placeholder="Ex: 40ml/h, 1600 Kcal/dia">
                            </div>
                            <div class="form-group">
                                <label for="funcao_intestinal">Função Intestinal</label>
                                <input type="text" id="funcao_intestinal" name="funcao_intestinal" placeholder="Ex: Presente, ausente, diarreia...">
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>8. Profilaxias</legend>
                        <div class="grid-container">
                            <div class="form-group">
                                <label for="profilaxia_tev">Profilaxia para TEV</label>
                                <input type="text" id="profilaxia_tev" name="profilaxia_tev" value="Enoxaparina 40mg SC 1x/dia">
                            </div>
                            <div class="form-group">
                                <label for="profilaxia_ulcera">Profilaxia para Úlcera de Estresse</label>
                                <input type="text" id="profilaxia_ulcera" name="profilaxia_ulcera" value="Pantoprazol 40mg IV 1x/dia">
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>9. Dispositivos Invasivos</legend>
                        <div class="form-group">
                            <label for="dispositivos">Descrição dos Dispositivos</label>
                            <textarea id="dispositivos" name="dispositivos" rows="3" placeholder="Ex: CVC em subclávia D (D5), SVD (D3), TOT nº 7.5 (D10)..."></textarea>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>10. Culturas e Exames de Imagem</legend>
                        <div class="form-group">
                            <label for="culturas">Culturas Pendentes</label>
                            <textarea id="culturas" name="culturas" rows="2" placeholder="Ex: Hemocultura (coletada em DD/MM), Urocultura..."></textarea>
                        </div>
                         <div class="form-group">
                            <label for="imagem">Resultados de Exames de Imagem</label>
                            <textarea id="imagem" name="imagem" rows="3" placeholder="Resumo dos achados da última TC de tórax, RX, etc."></textarea>
                        </div>
                    </fieldset>
                    
                    <fieldset>
                        <legend>11. Exames Laboratoriais</legend>
                        <div class="form-group">
                            <label for="laboratorio">Resultados Relevantes</label>
                            <textarea id="laboratorio" name="laboratorio" rows="4" placeholder="Hb: 8.5, Leucócitos: 12.500, Plaquetas: 98.000, PCR: 150, Cr: 2.3, Ur: 120..."></textarea>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>12. Pendências</legend>
                         <div class="form-group">
                            <label for="pendencias">Pendências para o dia</label>
                            <textarea id="pendencias" name="pendencias" rows="3" placeholder="Aguardar resultado de culturas, parecer da cardiologia, etc."></textarea>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>13. Condutas</legend>
                        <textarea id="condutas" name="condutas" rows="3" placeholder="Plano terapêutico..."></textarea>
                    </fieldset>

                    <fieldset>
                        <legend>14. Identificação do Profissional</legend>
                        <div class="grid-container" style="grid-template-columns: 2fr 1fr;">
                            <div class="form-group">
                                <label for="medico_responsavel">Nome do Médico</label>
                                <input type="text" id="medico_responsavel" name="medico_responsavel" placeholder="Seu nome completo">
                            </div>
                             <div class="form-group">
                                <label for="crm_medico">CRM</label>
                                <input type="text" id="crm_medico" name="crm_medico" placeholder="CRM/UF 123456">
                            </div>
                        </div>
                    </fieldset>

                    <button type="submit" id="saveEvolutionButton" class="button-primary" style="padding: 12px 30px; font-size: 1.1rem; margin-top: 20px;">Salvar Evolução</button>
                    <button type="button" id="cancelEditButton" class="button-secondary hidden" style="margin-top: 20px;">Cancelar Edição</button>
                </form>
            </section>
            
            <hr style="margin: 40px 0;">

            <section class="history-section">
                <h2>Histórico de Evoluções</h2>
                <div id="evolutionHistoryList" class="history-list">
                    <p>Nenhuma evolução anterior encontrada para este paciente.</p>
                </div>
            </section>
        </main>
    </div>

    <div id="printConfirmModal" class="modal-overlay">
        <div class="modal-content" style="max-width: 450px; text-align: center;">
            <p style="font-size: 1.1rem; margin-bottom: 25px;">Evolução salva com sucesso!</p>
            <div class="modal-footer" style="justify-content: center;">
                <button id="goToPatientViewBtn" class="button-primary">OK, Voltar ao Prontuário</button>
            </div>
        </div>
    </div>
    
    <div id="historyViewerModal" class="modal-overlay">
        <div class="modal-content wide">
            <div class="modal-header">
                <h2 id="viewerTitle">Visualizar Evolução</h2>
                <button id="closeViewerBtn" class="close-button">&times;</button>
            </div>
            <div id="viewerContent" class="modal-body">
                </div>
            <div class="modal-footer">
                 <button id="printDocumentBtn" class="button-primary">Imprimir</button>
                 <button id="closeViewerModalBtn" class="button-secondary">Fechar</button>
            </div>
        </div>
    </div>

    <script src="patient-evolution.js"></script>
</body>
</html>